if(window.fcTestHasRun)throw"Script tried to load twice";async function asyncify(t,e=(t=>Boolean(t)),n=1e4){const o=`Timeout ${t.toString()} after ${n/1e3}s.`;return new Promise(((s,c)=>{const a=setInterval((function(){const i=t();e(i)&&(s(i),clearInterval(a)),n<=0&&c(o),n-=100}),100)}))}async function asyncSelectAll(t,e=document){return asyncify((()=>[...e.querySelectorAll(t)]),(t=>t.length>0))}async function asyncSelect(t,e=document){return asyncify((()=>e.querySelector(t)))}function lightboxEvents(t){const e=t.parentElement,n=e.querySelector(".fc-lightbox__close"),o=()=>{if(n.parentElement!==e)return;const o=Math.max(t.offsetTop-e.scrollTop,0)+"px";o!==n.style.top&&(n.style.top=o);const s=5+(e.offsetWidth-e.clientWidth)+"px";s!==n.style.right&&(n.style.right=s)};e.addEventListener("scroll",o),window.addEventListener("resize",o),t.addEventListener("open",(()=>{[...document.querySelectorAll(".fc-lightbox")].forEach((t=>t.dispatchEvent(new Event("close")))),e.parentElement!==document.body&&document.body.appendChild(e),e.classList.remove("fc-hide"),e.scrollTop=0;var t=window.innerWidth-document.body.offsetWidth;document.body.style.marginRight=t+"px",document.documentElement.classList.add("fc-lightbox-open"),o()}),!1),t.addEventListener("close",(()=>{document.body.style.marginRight="0px",e.classList.add("fc-hide"),document.documentElement.classList.remove("fc-lightbox-open")}),!1),e.addEventListener("click",(({target:n})=>{n===e&&t.dispatchEvent(new Event("close"))})),n.addEventListener("click",(()=>t.dispatchEvent(new Event("close"))))}function makeLightbox({lightbox:t,contents:e,id:n,options:o={}}){const{style:s="",centered:c=!1}=o;e&&((t=document.createElement("div")).innerHTML=e,t.id=n),t.classList.add("fc-lightbox");let a=document.createElement("div");a.setAttribute("style",s),a.classList.add("fc-hide","fc-lightbox-overlay"),c&&a.classList.add("fc-lightbox--centered");const i='<button class="fc-lightbox__close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path class="cls-1" d="M390,308l-7.72,7.72-2.63-2.63,7.72-7.72-8.27-8.27,2.8-2.8,8.27,8.27,7.72-7.72,2.63,2.63-7.72,7.72,8.27,8.27-2.8,2.8Z" transform="translate(-379.1 -294.3)"/></svg></button>';return c?t.insertAdjacentHTML("afterbegin",i):a.insertAdjacentHTML("afterbegin",i),asyncSelect("body").then((t=>t.appendChild(a))),a.appendChild(t),t.classList.remove("fc-hide"),a.setAttribute("style",t.getAttribute("style")),lightboxEvents(t),t}function fcButtonEvents({target:t}){if("BUTTON"===t.nodeType||(t=t.closest("button"))){if(t.classList.add("fc-btn--clicked"),t.dataset.hide&&[...document.querySelectorAll(t.dataset.hide)].forEach((t=>t.classList.add("fc-hide"))),t.dataset.show&&[...document.querySelectorAll(t.dataset.show)].forEach((t=>{console.log(t),t.classList.remove("fc-hide")})),t.dataset.openLightbox){const e=document.querySelector(t.dataset.openLightbox);if(e){if(!e.classList.contains("fc-lightbox")){makeLightbox({lightbox:e,options:{...e.dataset.lightboxOptions?JSON.parse(e.dataset.lightboxOptions):{}}})}}else console.error(t.dataset.openLightbox+" doesen't exist");e?.dispatchEvent(new Event("open"));const n=`[data-open-lightbox="${t.dataset.openLightbox}"]`;[...document.querySelectorAll(n)].forEach((e=>{if(e===t||"BUTTON"!==e.nodeName)return;const o=e.parentElement.closest(n);(o||e).classList.add("fc-hide")}))}if(t.dataset.closeLightbox){document.querySelector(t.dataset.closeLightbox).dispatchEvent(new Event("close"))}if(t.dataset.replaceParentWith){(t.dataset.parent?t.closest(t.dataset.parent):t.parentElement).innerHTML=t.dataset.replaceParentWith}if(t.dataset.replaceWith&&(t.outerHTML=t.dataset.replaceWith),t.dataset.scrollTo){const e=document.querySelector(t.dataset.scrollTo);let n="center";e.offsetHeight>window.innerHeight+100&&(n="start"),e.scrollIntoView({block:n,behavior:"smooth"})}if(t.dataset.trackEvent&&"undefined"!=typeof ga){const e=window.location.hostname+window.location.pathname;ga("send","event",{eventCategory:"Page interaction",eventAction:"click",eventLabel:t.dataset.trackEvent+"("+e+")"})}if("#full-story"===t.dataset.openLightbox){const e=t.closest("fc-full-story-btn-container");e?.classList.add("clicked"),document.body.classList.add("fc-full-story-opened")}}}window.fcTestHasRun=!0,asyncSelect("body").then((t=>t.addEventListener("click",fcButtonEvents)));